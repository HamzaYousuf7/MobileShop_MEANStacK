<div class="container">
  <app-spinner *ngIf="isLoading"></app-spinner>

  <app-modal [isModalOpen]="isModalOpen" (toggleModalOutput)="closeModal()">
    <span class="children">{{ response }} </span>
  </app-modal>

  <div *ngIf="!isLoading">
    <h1>ADD NEW PRODUCT:</h1>
    <form
      class="form-horizontal"
      [formGroup]="updateProdForm"
      (ngSubmit)="updateProductHandler()"
    >
      <div class="form-group">
        <label class="control-label col-sm-2" for="name">Name:</label>
        <div class="col-sm-10">
          <input
            formControlName="name"
            type="text"
            class="form-control"
            id="name"
            placeholder="Enter name"
          />

          <div
            class="alert alert-danger"
            *ngIf="
              updateProdForm.get('name').touched &&
              !updateProdForm.get('name').valid &&
              updateProdForm.get('name').errors.required
            "
          >
            <strong>Warning!</strong> This filed is required
          </div>
        </div>
      </div>

      <div class="form-group">
        <label class="control-label col-sm-2" for="name">Brand Name:</label>
        <div class="col-sm-10">
          <input
            formControlName="brandName"
            type="text"
            class="form-control"
            id="brandName"
            placeholder="Enter Brand Name"
          />

          <div
            class="alert alert-danger"
            *ngIf="
              updateProdForm.get('brandName').touched &&
              !updateProdForm.get('brandName').valid &&
              updateProdForm.get('brandName').errors.required
            "
          >
            <strong>Warning!</strong> This filed is required
          </div>
        </div>
      </div>

      <div class="form-group">
        <label class="control-label col-sm-2" for="name">Price:</label>
        <div class="col-sm-10">
          <input
            formControlName="price"
            type="number"
            class="form-control"
            id="price"
            placeholder="Enter price"
          />
          <div
            class="alert alert-danger"
            *ngIf="
              updateProdForm.get('price').touched &&
              !updateProdForm.get('price').valid &&
              updateProdForm.get('price').errors.required
            "
          >
            <strong>Warning!</strong> This filed is required
          </div>
        </div>
      </div>

      <div class="form-group">
        <label class="control-label col-sm-2" for="name">Description:</label>
        <div class="col-sm-10">
          <textarea
            formControlName="description"
            type="text"
            class="form-control"
            id="description"
            placeholder="Enter description"
          ></textarea>
          <div
            class="alert alert-danger"
            *ngIf="
              updateProdForm.get('description').touched &&
              !updateProdForm.get('description').valid &&
              updateProdForm.get('description').errors.required
            "
          >
            <strong>Warning!</strong> This filed is required
          </div>
        </div>
      </div>

      <div class="form-group">
        <label class="control-label col-sm-2" for="name">Rating:</label>
        <div class="col-sm-10">
          <input
            formControlName="rating"
            type="number"
            class="form-control"
            id="rating"
            placeholder="Enter rating"
          />
          <div
            class="alert alert-danger"
            *ngIf="
              updateProdForm.get('rating').touched &&
              !updateProdForm.get('rating').valid &&
              updateProdForm.get('rating').errors.required
            "
          >
            <strong>Warning!</strong> This filed is required
          </div>
        </div>
      </div>

      <div class="form-group">
        <label class="control-label col-sm-2" for="name"
          >Available Color:</label
        >
        <div class="col-sm-10">
          <input
            formControlName="availableColor"
            type="text"
            class="form-control"
            id="availableColor"
            placeholder="Enter Available Color"
          />
          <div
            class="alert alert-danger"
            *ngIf="
              updateProdForm.get('availableColor').touched &&
              !updateProdForm.get('availableColor').valid &&
              updateProdForm.get('availableColor').errors.required
            "
          >
            <strong>Warning!</strong> This filed is required
          </div>
        </div>
      </div>

      <div class="form-group">
        <label class="control-label col-sm-2" for="name">Main Image:</label>
        <div class="col-sm-3">
          <input
            type="file"
            id="mainImg"
            (change)="pickMainImgHandler($event)"
          />
        </div>
        <div class="col-sm-7">
          <img
            src="http://localhost:5000/{{ ServerMainImgPreview }}"
            width="150px"
            height="150px"
            *ngIf="ServerMainImgPreview"
          />

          <img
            [src]="localMainImgPreview"
            width="150px"
            height="150px"
            *ngIf="localMainImgPreview && !ServerMainImgPreview"
          />
        </div>
      </div>

      <div class="form-group">
        <label class="control-label col-sm-2" for="additionalImages"
          >Additional Images:</label
        >
        <div class="col-sm-3">
          <input
            type="file"
            id="additionalImages"
            multiple
            (change)="pickAddtionallImgHandler($event)"
          />
        </div>
        <div class="col-sm-7">
          <img
            *ngFor="let img of serverAdditionalImagesPriviews"
            src="http://localhost:5000/{{ img }}"
            width="150px"
            height="150px"
          />

          <img
            [src]="img"
            width="150px"
            height="150px"
            *ngFor="let img of localAdditionalImagesPriviews"
          />
          <span
            *ngIf="
              !localAdditionalImagesPriviews && !serverAdditionalImagesPriviews
            "
            >{{ inValidImagesPick }}</span
          >
        </div>
      </div>

      <div class="form-group">
        <div class="col-sm-offset-2 col-sm-10">
          <button
            type="submit"
            class="btn btn-default"
            [disabled]="!updateProdForm.valid"
          >
            Add
          </button>
        </div>
      </div>
    </form>
  </div>
</div>
